<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invictus G — Movement Reset Lab</title>
  <style>
    /* DARK_MODE_V1: theme variables + full UI dark mode */

    :root {
      --bg: #fafafa;
      --panel: #ffffff;
      --topbar: #ffffff;
      --text: #111827;
      --border: #d1d5db;

      --pill-bg: #ffffff;
      --pill-border: #cbd5e1;

      --btn-bg: #ffffff;
      --btn-border: #cbd5e1;
      --btn-text: #111827;

      --board-bg: #fafafa;

      /* Light loam (kept for light theme) */
      --hex-fill: #E2D3B3;
      --hex-stroke: #BFA47A;

      --hex-legal: #1e88e5;
      --hex-sel: #111111;

      --hex-atk: #dc2626;

      --unit-stroke: #111111;

      --status-bg: #ffffff;
      --status-border: #d1d5db;
      --status-text: #111827;
      --status-bad: #b00020;
      --status-good: #2e7d32;
    }

    html[data-theme="dark"] {
      --bg: #0b0f14;
      --panel: #0f172a;
      --topbar: #0f172a;
      --text: #e5e7eb;
      --border: #334155;

      --pill-bg: #0b1220;
      --pill-border: #334155;

      --btn-bg: #0b1220;
      --btn-border: #334155;
      --btn-text: #e5e7eb;

      --board-bg: #0b0f14;

      /* Dark loam */
      --hex-fill: #6B5A44;
      --hex-stroke: #A38A62;

      --hex-legal: #60a5fa;
      --hex-sel: #f8fafc;

      --hex-atk: #f87171;

      --unit-stroke: #e5e7eb;

      --status-bg: #0b1220;
      --status-border: #334155;
      --status-text: #e5e7eb;
      --status-bad: #ff6b6b;
      --status-good: #4ade80;
    }

    body {
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .topbar {
      display:flex;
      gap:12px;
      align-items:center;
      padding:10px 12px;
      border-bottom:1px solid var(--border);
      background: var(--topbar);
    }

    .pill {
      padding:6px 10px;
      border:1px solid var(--pill-border);
      border-radius:999px;
      background: var(--pill-bg);
      color: var(--text);
      font: 12px/1 ui-monospace, Menlo, monospace;
    }

    .wrap {
      display:grid;
      grid-template-columns: 320px 1fr;
      height: calc(100vh - 52px);
    }

    .panel {
      border-right:1px solid var(--border);
      padding:12px;
      overflow:auto;
      background: var(--panel);
      color: var(--text);
    }

    .panel h3 { margin: 0 0 10px 0; font-size: 14px; }

    pre { white-space: pre-wrap; word-break: break-word; }

    .status {
      margin-top:10px;
      padding:8px 10px;
      border:1px solid var(--status-border);
      background: var(--status-bg);
      color: var(--status-text);
      border-radius:10px;
      font: 12px/1.3 ui-monospace, Menlo, monospace;
    }
    .status.bad { border-color: var(--status-bad); color: var(--status-bad); }
    .status.good { border-color: var(--status-good); color: var(--status-good); }

    button {
      padding:8px 10px;
      border:1px solid var(--btn-border);
      border-radius:10px;
      background: var(--btn-bg);
      color: var(--btn-text);
      cursor:pointer;
    }
    button:disabled { opacity:0.5; cursor:not-allowed; }

    #board { width: 100%; height: 100%; background: var(--board-bg); }

    /* Hexes */
    .hex { fill: var(--hex-fill); stroke: var(--hex-stroke); stroke-width: 1; }
    .hex.legal { stroke-width: 3; stroke: var(--hex-legal); }
    .hex.sel { stroke-width: 3; stroke: var(--hex-sel); }

    
    /* HEX_ATK_V1 */
    .hex.atk { stroke-width: 3; stroke: var(--hex-atk); }
/* Units */
    .unitShape { stroke: var(--unit-stroke); stroke-width: 0.85; }
    .uText { font-family: ui-monospace, Menlo, monospace; pointer-events:none; user-select:none; }
    .uType { font-size: 8px; font-weight: 700; }
    .uHP { font-size: 7px; font-weight: 700; }

    /* QUALITY_OUTLINE_V1: training quality is outline color */
    .unit[data-quality="Green"]   .unitShape { stroke: #10B981; stroke-width: 1.3; }
    .unit[data-quality="Regular"] .unitShape { stroke: #9CA3AF; stroke-width: 1.3; }
    .unit[data-quality="Veteran"] .unitShape { stroke: #D4AF37; stroke-width: 1.3; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="pill" id="truthPill">Loading TRUTH…</div>
    <div class="pill" id="turnPill">Turn: ?</div>
    <div class="pill" id="actPill">Activations: ?/3</div>
    <button id="endTurnBtn">End Turn</button>
    <button id="resetBtn">Reset</button>
    <button id="themeBtn">Theme: Dark</button>
  </div>

  <div class="wrap">
    <div class="panel">
      <h3>Selected</h3>
      <pre id="selectedBox">(none)</pre>

      <h3>Log</h3>
      <pre id="logBox"></pre>

      <h3>TRUTH</h3>
      <pre id="truthBox"></pre>

      <div id="status" class="status">Ready.</div>
    </div>

    <svg id="board" viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg"></svg>
  </div>
  <script>
  // THEME_TOGGLE_V1
  (function() {
    const root = document.documentElement;
    const KEY = "invictus_g_theme";
    function setTheme(t) {
      root.dataset.theme = t;
      const btn = document.getElementById("themeBtn");
      if (btn) btn.textContent = "Theme: " + (t === "dark" ? "Dark" : "Light");
    }
    const saved = localStorage.getItem(KEY);
    setTheme(saved || "dark");
    document.addEventListener("DOMContentLoaded", function() {
      const btn = document.getElementById("themeBtn");
      if (!btn) return;
      btn.addEventListener("click", function() {
        const next = (root.dataset.theme === "dark") ? "light" : "dark";
        localStorage.setItem(KEY, next);
        setTheme(next);
      });
    });
  })();
  </script>


  <script src="app.js?v=20260220-205448"></script>
</body>
</html>
